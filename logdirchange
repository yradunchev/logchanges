#!/usr/bin/env bash

# where log file sits:
lfil="${HOME}/P/projects/logdirchanges/logfile" 
# time stamp format (strftime format):
tfmt='%F %T'
# log line format as described in 'man inotifaywatch'
lfmt='%T;%e;%w%f'
# list of filesystem paths to monitor - one per line
watc="${HOME}/P/projects/logdirchanges/dirstowatch"

# monitor. note: if recursion not requred remove -r option below!
inotifywait --fromfile "${watc}" \
  # comment out below line if you want to use script for additional actions
  -o "${lfil}" \
  # comment out below line if recurion not requred
  -r \
  # leave below as it is...
  -m -q \
  # add/remove events below, comment out entire line to log everything
  -e create -e modify -e delete -e move \
  # apply formating...
  --timefmt "${tfmt}" --format "${lfmt}" |
  while read -r evnt 
do
  # you can add more actions here. 
  # $evnt is ; delimited 3rd filed contains file system path
  echo "${evnt}" >> ${lfil} # log event
done
